<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        td input
        {
            width: 2rem;
        }
    </style>
</head>
<body>
    <input type="text" id="name">
    <input type="text" id="email">
    <input type="text" id="phone">
    <button id="add">add</button>
<table border="1">
    <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Remove</th>
            <th>Edit</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>    <script>
        let name = document.querySelector("#name")
        let email = document.querySelector("#email")
        let phone = document.querySelector("#phone")
        let tbody=document.querySelector("tbody")
        let btnAdd = document.querySelector("#add")

        names = JSON.parse(window.localStorage.getItem("names"))||[]
        emails = JSON.parse(window.localStorage.getItem("emails"))||[]
        phones = JSON.parse(window.localStorage.getItem("phones"))||[]


        function createInput(value) {
            const input = document.createElement("input")
            input.type = "text"
            input.value = value
            return input
        }

        function createBtn(text, className) {
            const btn = document.createElement("button")
            btn.textContent = text
            btn.classList.add(className)
            return btn
        }


        function replace(params) {
            
        }

        function addRow(index, name, email,phone) {
            const row = document.createElement("tr")
            row.innerHTML = `
                <td>${name}</td>
                <td>${email}</td>
                <td>${phone}</td>
                <td><button class="remove">Remove</button></td>
                <td><button class="edit">edit</button></td>
            `;
            row.querySelector(".remove").addEventListener("click" ,()=>{
                names.splice(index,1)
                emails.splice(index,1)
                phones.splice(index,1)
                saveData()
                renderTable()
            })

            row.querySelector(".edit").addEventListener("click" ,()=>{
                const nameInput = 
                (names[index])
                const emailInput = createInput(emails[index])
                const phoneInput = createInput(phones[index])

                const confirmBtn = createBtn("confirm", "confirm")
                const cancelBtn = createBtn("cancel", "cancel")

                const inputs = [nameInput, emailInput, phoneInput]

                inputs.forEach((input, i) => {
                    row.children[i].innerHTML = ""
                    row.children[i].appendChild(input)
                })

                row.children[4].innerHTML = ""
                row.children[4].append(confirmBtn, cancelBtn)
                row.querySelector(".cancel").addEventListener("click", ()=>{
                    renderTable()
                })
                row.querySelector(".confirm").addEventListener("click", ()=>{
                    names[index] = nameInput.value
                    emails[index] = emailInput.value
                    phones[index] = phoneInput.value
                    saveData()
                    renderTable()
                })

                 
            }
        )
            tbody.appendChild(row)
        }

        function saveData() {
            window.localStorage.setItem("names", JSON.stringify(names))
            window.localStorage.setItem("emails", JSON.stringify(emails))
            window.localStorage.setItem("phones", JSON.stringify(phones))
        }


        function renderTable() {
            tbody.innerHTML = ""
            names.forEach((name, i) => {
                addRow(i,name, emails[i], phones[i])
            });
        }
        btnAdd.addEventListener("click", ()=>{
            if(!name.value || !email.value || !phone.value)return;
            names.push(name.value)
            emails.push(email.value)
            phones.push(phone.value)
            saveData()
            renderTable()
            name.value=""
            email.value=""
            phone.value=""
        })
        renderTable()
    </script>
</body>
</html>
